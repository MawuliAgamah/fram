# Traffic Flow Analysis Scenario
# ==============================
# Urban grid with intersections, analyzing pedestrian traffic flow,
# bottlenecks, and congestion at chokepoints.

world:
  width: 200
  height: 150
  features:
    # Main roads (horizontal)
    - terrain: road
      rect: { x: 0, y: 30, w: 200, h: 5 }
    - terrain: road
      rect: { x: 0, y: 70, w: 200, h: 5 }
    - terrain: road
      rect: { x: 0, y: 110, w: 200, h: 5 }

    # Main roads (vertical)
    - terrain: road
      rect: { x: 40, y: 0, w: 5, h: 150 }
    - terrain: road
      rect: { x: 95, y: 0, w: 5, h: 150 }
    - terrain: road
      rect: { x: 150, y: 0, w: 5, h: 150 }

    # Buildings (blocks)
    - terrain: building
      rect: { x: 5, y: 5, w: 30, h: 20 }
    - terrain: building
      rect: { x: 50, y: 5, w: 40, h: 20 }
    - terrain: building
      rect: { x: 105, y: 5, w: 40, h: 20 }
    - terrain: building
      rect: { x: 160, y: 5, w: 35, h: 20 }

    - terrain: building
      rect: { x: 5, y: 40, w: 30, h: 25 }
    - terrain: building
      rect: { x: 50, y: 40, w: 40, h: 25 }
    - terrain: building
      rect: { x: 105, y: 40, w: 40, h: 25 }
    - terrain: building
      rect: { x: 160, y: 40, w: 35, h: 25 }

    - terrain: building
      rect: { x: 5, y: 80, w: 30, h: 25 }
    - terrain: building
      rect: { x: 50, y: 80, w: 40, h: 25 }
    - terrain: building
      rect: { x: 105, y: 80, w: 40, h: 25 }
    - terrain: building
      rect: { x: 160, y: 80, w: 35, h: 25 }

    # Park area (grass)
    - terrain: grass
      rect: { x: 50, y: 120, w: 40, h: 25 }

    # Sidewalks are the open terrain between buildings and roads

    # Narrow chokepoint â€” construction barrier
    - terrain: obstacle
      rect: { x: 92, y: 70, w: 3, h: 5 }

  exits:
    # Destination zones (transit stops, buildings)
    - rect: { x: 195, y: 30, w: 5, h: 5 }
    - rect: { x: 0, y: 70, w: 5, h: 5 }
    - rect: { x: 95, y: 0, w: 5, h: 5 }
    - rect: { x: 95, y: 145, w: 5, h: 5 }

agents:
  seed: 77
  groups:
    # Morning commuters (west to east)
    - count: 150
      spawn_area: { x: 0, y: 25, w: 10, h: 100 }
      personality:
        speed_mean: 1.3
        speed_std: 0.2
        panic_low: 0.8
        panic_high: 0.95
        patience_mean: 50.0
        patience_std: 20.0

    # Cross-traffic (north to south)
    - count: 80
      spawn_area: { x: 50, y: 0, w: 100, h: 10 }
      personality:
        speed_mean: 1.0
        speed_std: 0.15
        panic_low: 0.7
        panic_high: 0.9

    # Slow walkers / tourists
    - count: 40
      spawn_area: { x: 40, y: 60, w: 60, h: 30 }
      personality:
        speed_mean: 0.6
        speed_std: 0.15
        herding_alpha: 4.0
        herding_beta: 1.5
        patience_mean: 100.0

hazards: []

simulation:
  dt: 0.1
  max_ticks: 4000
  field_update_interval: 30
